<!DOCTYPE html>

<html>
<head>
<title>
DOITF030 - Tips u. Tricks zum Atari Falcon F030: COMBO Chip
</title>
<meta charset="utf-8">


<link rel=home href="index.html" title="Homepage">
<link href="styles/style.css" rel="stylesheet">
</head>
<body>

<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" class="udocon"></a>
<a href="0401.htm" target="UDOcon"><img src="udo_up.gif" alt="Falcon Custom Chip" class="udocon"></a>
<a href="040101.htm" target="UDOcon"><img src="udo_lf.gif" alt="NVRAM" class="udocon"></a>
<a href="040103.htm" target="UDOcon"><img src="udo_rg.gif" alt="VIDEL Chip" class="udocon"></a>
</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr>
<td valign=top width="8">&nbsp;</td><td valign=top width="100%">
<h1><a name="COMBO_20Chip">4.1.2 COMBO Chip</a></h1>
<p align=center><img src="image/line.gif" border=0 width="637" height="6"></p><br>
<p><tt> Der COMBEL (COMBO) CHIP im Falcon</tt>
</p>
<p>Der COMBO ist ein speziell für den <a href="0302.htm" target="UDOcon">Falcon F030</a> hergestellter
Multifunktionsbaustein mit folgenden Funktionen:
<br>
<br>
</p>
<pre>
- Memory Contol Unit [MCU]
- Interrupt Priority and Illegal Condition Detection
- Clock Dividers / Taktteiler
- Chip Select Handling
- <a href="0c0c.htm" target="UDOcon">Paddleport</a> Controller
- Joystick Controller
- Light Gun Controller
- Blitter (Grafischer Coprozessor im Falcon)

</pre>
<p>
<br>
</p>
<p>Die MCU im COMBO nimmt die Adressen vom Adressbus (A1-A23) und
wandelt diese in Reihen und Spalten für das DRAM. Ebenso erzeugt
die MCU die RAS- und CAS-Signale für den Betrieb des
Ramspeichers.
<br>
</p>
<p>Ebenso werden hier die Chipselectsignale für das ROM und die
I/O-Bausteine generiert. Die MCU im COMBO kann im FalconF030 bis zu
14MB Ram verwalten und adressieren. Sie ist auch der Grund für
brachliegende 2 MB Speicher, die im Falcon nicht mal als Ramdisk
angesprochen werden können.
<br>
</p>
<p>Die Größe des Ramspeichers beschränkt sich im
Falcon auf genau zwei Ausbaustufen. Es gibt eine 4MB und eine 14MB
(16MB) Ramkarte, die auf den internen Erweiterungsplatz gesteckt
werden können. Hierzu existieren genau zwei Selektionspins, die
über einen weiteren Hardwarebaustein der MCU mitteilt, welche
Menge von RAM zur Verfügung steht. Die MCU produziert ebenfalls
sämtliche Adressen für den Videospeicher, den Refresh und
den CPU/DMA Datentransfer über den Multiplex-Adressbus des
Falcon.
</p>
<p>Es ist jedoch möglich, ein Falcon-System über den
<a href="030702.htm" target="UDOcon">Expansionsport</a> mit schnellem TT-Ram (FAST-Ram) auszustatten. Siehe
<a href="0b03.htm" target="UDOcon">FX-Karte</a>.
<br>
</p>
<p>Sämtliche Systeminterrupts werden im COMBO maskiert. Ebenso
wird der Status aller Interrups im COMBO gespeichert. Beachten Sie die
Auflistung der Systeminterrupts und deren Priorität.
<br>
</p>
<pre>
Interrupt Level       Priorität
----------------------------------------------
7 (highest)           Open (Bus)
6                     MFP / DSP Interrupt
5                     85C30 LAN Baustein
4                     VSYNC (Vertikal Blank)
3                     Open (Bus)
2                     HSYNC (Horizontal Blank)
1 (lowest)            Open (Bus)

</pre>
<p>
<br>Die <a href="0305.htm" target="UDOcon">Hardware</a> im COMBEL erlaubt es, die Interruptlevels 1-3 als
Interrupts von externen Devices zu behandeln. So sind einige
Subsysteme in wie z.B. der IDE- oder der Parallelport in der Lage,
diese Interrupts zu aktivieren. Weitere <a href="0305.htm" target="UDOcon">Hardware</a> nutzt den
Interruptlevel 5. Der COMBO Chip meldet der CPU über die
Leitungen IPLO-IPL2, mit welcher Priorität der gerade
aufgetretene Interrupt anliegt. Die CPU entscheidet die Behandlung.
<br>
<br>
</p>
<pre>
Interrupt Signal Definiton

IPL2   IPL1    IPL0    Interrupt Level
----------------------------------------------
1      1       1       Level 1
1      0       1       Level 2
1      0       0       Level 3
0      1       1       Level 4
0      1       0       Level 5
0      0       1       Level 6
0      0       0       Level 7

</pre>
<p>
<br>
</p>
<p>Weiterhin ist der COMBEL in der Lage, einen Bus Error und diverse
andere Fehlfunktionen festzustellen. Die meisten Fehlererkennungen
basierten auf Laufzeitfehlern. Im COMBO ist festgelegt welche Funktion
welche Zeit benötigt. Wird eine Funktion nicht innerhalb einer
bestimmten Zeitspanne positiv beendet, ist dies ein Fehler des
entsprechenden Systems.
<br>
</p>
<p>Nach folgenden Kriterien sendet der COMBEL ein BERR-Signal zur
CPU:
<br>
</p>
<p>- Ein Buszyklus ist nicht in 16 Microsekunden beendet
(änderbar auf 32uS)!!
<br>- Ein Versuch, das ROM zu beschreiben
<br>- Ein Versuch, Daten mit falscher Länge, Format in ein
Register zu schreiben
<br>- Beschreiben des Systemspeichers im Usermode
<br>
<br>
</p>
<p><b> Taktteiler </b>
<br>
</p>
<p>Das COMBO IC wandelt die ursprünglichen 32Mhz Mastertakt in
16Mhz, 8Mhz sowie in ein 4 Mhz und in ein 500Khz Taktsignal um. Alle
Taktsignale werden von anderen Custom Chips bzw. Systembausteinen
benötigt.
<br>
<br>
</p>
<p><b>Chipselekt </b>
<br>
</p>
<p>Der COMBEL dekodiert die Adressen und selektiert daraus die
Chipselectsignale für weitere Peripheriebausteine des Falcon
F030.
<br>Das betrifft folgende Systembausteine:
<br>
</p>
<p>8650, MFP, VIDEL , RTCCS (RealTimeClock), MMU , <a href="0c09.htm" target="UDOcon">Romport</a>,
(XROM3/XROM4)
<br>IDE (HIDECS0/HIDECS1) sowie ROM / ROM2
<br>
</p>
<p>Im COMBO werden ebenfalls die Signale PAD0X, PAD1X und PAD0Y,
PAD1Y sowie PADRST verarbeitet. Alle diese Signale stammen vom
<a href="0c0c.htm" target="UDOcon">Paddleport</a>, den es bisher auch nur am Falcon bzw. am Atari STe gibt.
<br>PADRST dient als Resetsignal für den <a href="0c0c.htm" target="UDOcon">Paddleport</a>.
<br>Ebenso befindet sich im Innern des COMBO die Logik, um ein paar
Joysticks am Falcon betreiben zu können. Hierzu liegen am COMBEL
die Inputsignale JOYRH, JOYRL an. Beide Signale sind
ReadEnable-Signale. JOYWH und JOYWL sind WriteEnable-Signale. BUTTON
ist die Signalleitung für die Feuertasten
<br>
</p>
<p><b> Blitter integriert </b>
<br>
</p>
<p>Der im COMBO integrierte BLITTER ist der grafische Coprozessor,
wie er auch schon in anderen Atari-Computern eingebaut war. Im Falcon
wurde der Blitter aber eben in den COMBEL integriert. Der Blitter
lässt sich im Falcon mit einem Softwarebefehl deaktivieren. In
anderen Systemen musste hier ein Jumper oder eine Lötbrücke
gesetzt werden. Der Blitter sollte Bitblock-Operationen beschleunigen
und die CPU unterstützen/entlasten. Die Pinbelegung des COMBO
Chip entnehmen Sie bitte dem Kapitel Pin aus DOITF030.
<br>
</p>
<p>Letztlich bleibt noch das Signal XPEN, welches den COMBO
veranlasst, die Daten vom Horizontal-/ Vertikalzähler einzulesen.
Diese Daten werden erreicht, in dem die korrekte Position der
&quot;Lightgun&quot; anhand des Bildschirm-Lichtrasters von der CPU
errechnet wird.
<br>
</p>
<p>Bleibt als Abschluß noch zu sagen, daß Sie sich
bemühen sollten, den COMBEL in ihrem Falcon pfleglich zu
behandeln. Anhand dieser Erläuterungen können Sie sehen,
daß ohne diesen Chip Ihr Falcon nicht mal eine einfache Diskette
erkennen wird. Sie werden ohne den COMBEL nicht mal eine einfache
Bildschirmausgabe haben.
<br>
</p>
<p>Funktioniert der COMBEL nicht, erhalten Sie, wie bei einem Fehler
im Videoteil, einen weißen Bildschirm. Kein Bootlogo. Die
interne IDE-Festplatte läuft nicht an und es kann auch nicht von
einer Diskette gebootet werden. Eventuell läuft das Testmodul im
<a href="0c09.htm" target="UDOcon">Romport</a>.
<br>
</p>
<p>Ersatzchips finden Sie unter <a href="030805.htm" target="UDOcon">Ersatzteile</a> und <a href="1604.htm" target="UDOcon">Händler</a>.
<br>
<br>
<br>
</p>



<hr>

</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" class="udocon"></a>
<a href="0401.htm" target="UDOcon"><img src="udo_up.gif" alt="Falcon Custom Chip" class="udocon"></a>
<a href="040101.htm" target="UDOcon"><img src="udo_lf.gif" alt="NVRAM" class="udocon"></a>
<a href="040103.htm" target="UDOcon"><img src="udo_rg.gif" alt="VIDEL Chip" class="udocon"></a>
</td></tr></table>
</body></html>
