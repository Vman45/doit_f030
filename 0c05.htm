<!DOCTYPE html>

<html>
<head>
<title>
DOITF030 - Tips u. Tricks zum Atari Falcon F030: Druckerschnittstelle
</title>
<meta charset="utf-8">


<link rel=home href="index.html" title="Homepage">
<link href="styles/style.css" rel="stylesheet">
</head>
<body>

<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" class="udocon"></a>
<a href="0c.htm" target="UDOcon"><img src="udo_up.gif" alt="Stecker und Schnittstellen am Falcon F030" class="udocon"></a>
<a href="0c04.htm" target="UDOcon"><img src="udo_lf.gif" alt="interner Expansionsport" class="udocon"></a>
<a href="0c06.htm" target="UDOcon"><img src="udo_rg.gif" alt="LAN-Port" class="udocon"></a>
</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr>
<td valign=top width="8">&nbsp;</td><td valign=top width="100%">
<h1><a name="Druckerschnittstelle">12.5 Druckerschnittstelle</a></h1>
<p align=center><img src="image/line.gif" border=0 width="637" height="6"></p><br>
<p><tt> Drucker- oder Centronics-Schnittstelle am <a href="0302.htm" target="UDOcon">Falcon F030</a></tt>
<br>
<br>
</p>
<p><img src="image/deutsch.gif" border=0 width="35" height="22"></p><br>
<p>Eine relativ gute Erklärung dazu findet sich im ELV-Journal
Nr. 53 oder im &quot;PC-Repair&quot; von Schnüller/Veddeier.
<br>
</p>
<p>Die Hauptanwendung der 8-Bit Parallelschnittstelle liegt in der
Verbindung von einem Rechner mit einem passenden Drucker.
Grundsätzlich kann anstelle eines Druckers auch ein beliebig
anderes Gerät, das eine sog. &quot;Centronics-Schnittstelle&quot;
besitzt, angeschlossen werden. Die Datenübertragung erfolgt in
der gleichen Art.
<br>
</p>
<p>Die Schnittstelle am Atari ist &quot;Bi-direktional&quot;
<br>
</p>
<p>Alle Signale der Schnittstelle arbeiten mit normalem TTL-Pegel.
Mit 'H' wird ein 'High'-Signal bezeichnet, dessen Pegel gegen GND
gemessen zwischen +2.5V und +5V liegt. (Normal ca. 4.5V) Mit 'L' wird
ein 'Low'-Signal bezeichnet, dessen Pegel lediglich zwischen 0V und
0.7V liegen darf. Höhere Pegel könnten als 'H' interpretiert
werden. Die Schnittstelle am Atari Falcon ist werksseitig
Bi-direktional ausgelegt.
<br>
</p>
<p>Um auf einem Drucker eben drucken zu können, müssen
bestimmte Leitungen der Parallel-Schnittstelle des Falcons mit eben
dem zu verwendeten Drucker verbunden werden. I.d.R. werden hierzu
fertige Kabel benutzt, die u.a. auch im Lieferumfang des Druckers zu
finden sein können.
<br>
</p>
<p>An allen Atari-Computern sollten sie &quot;Epson-Kompatible&quot;
Drucker verwenden. Neuere Drucker mit der Bezeichnung &quot;Windows
Plug &amp; Play&quot; müssen an der Atari-Schnittstelle nicht
unbedingt arbeiten! Fragen Sie vor dem Kauf eines neuen Druckers ihren
Fachhändler genau!
<br>
</p>
<p>Alle Drucker besitzen an den 8 Datenleitungen sog.
Pullup-Widerstände. I.d.R. sind diese Widerstände ca.
3.3KOhm groß. Kleinere Widerstände können
Atari-Computer -den internen Soundchip Port B- rasch beschädigen.
Bei einer Störung gehen die Ausgangsports des Chips in den
überlastschutz; nach einem Reset des Computers oder einem
Abschalten und erneuten Einschalten sollte er wieder funktionieren.
Allerdings klappt das auch nicht immer, der Chip ist dann irreparabel
beschädigt und muß leider ausgetauscht werden. Wie auch bei
bisher allen Atari-Computern werden die Signale für die
Druckerschnittstelle auch beim <a href="0302.htm" target="UDOcon">Falcon F030</a> komplett vom sog. Soundchip
erzeugt. Es kommt hier ein YM-3439 (PSG) des Herstellers Yamaha zur
Verwendung. Siehe Pin und <a href="030805.htm" target="UDOcon">Ersatzteile</a>. Meines Wissens arbeitet der
Rechner auch nur genau mit diesem Chiptyp korrekt.
<br>
<br>
<br><b> Beschreibung der <a href="0305.htm" target="UDOcon">Hardware</a> </b>
<br>
<br>
</p>
<p>Die 8 Datenleitungen laufen als Bus (PSG7) über jeweils einen
T-Filter; das sind die Bauteile L15-L23 direkt hinter der DB25-Buchse
auf dem Mainboard, ungepuffert bis an den Port B des Soundchips. Der
Soundchip trägt die Bezeichung U17 auf dem Falcon-Mainboard.
<br>Die Datenleitungen treten hier an Pin 1 - Pin 8, direkt am Chip,
(IOB7-IOB0) in genau der gleichen Reihenfolge wieder zum Vorschein.
Pin 17 des Druckeranschluß (J4) -also das SELECT-Signal- kommt
über das T-Filter L19 zum Pin 25 (IO0) des MC68901; das ist
Bauteil U31, welches auch das Select-Signal erzeugt.
<br>
</p>
<p><b> STROBE-Signal </b>
<br>STROBE kommt über das T-Filter L14 von Pin 11 (IOA5) des
YM-3439 und liegt somit an Pin 1 der Druckerschnittstelle (J4) an.
<br>
</p>
<p><b> BUSY-Signal </b>
<br>Das BUSY-Signal, Pin 11 läuft über die T-Filterspule
L25, einem 3.3K Pullup Widerstand bis nach Pin 25 von U31.
<br>
</p>
<p><b> AKNOWLEDGE </b>
<br>ACKNOWLEDGE, Pin 10 der Druckerschnittstelle führt über
L24 zu Pin 26 von U31 (IO1).
<br>
</p>
<p>
<br>Deutlich also auch so zu sehen, daß Sie eine unbedachte
Bastelei an der Druckerschnittstelle des Falcon auf jeden Fall einen
Soundchip kostet. Es gibt keinen Buffer, keinen Hardwaretreiber
für diesen Port. Aller Regel nach reicht die Treiberleisung der
Chipports für eben besagte 3.3KOhm-Pullup Widerstände und
ein Druckerkabel mit einer Länge von bis maximal 5 Meter.
<br>
</p>
<p>Längere Druckerkabel benötigen auf alle Fälle einen
Hardwaretreiber.
<br>Siehe Druckertreiber.
<br>
</p>
<p>Also wie bei den alten STs, keine Verbesserung, wie gehabt.
<br>
<br>
<br><b>Erklärung der wenigen Schnittstellensignale</b>
</p>
<dl>
<dt><b>STROBE (STB)</b></dt><dd> Ein vom Rechner kommendes Signal zur Syncronisation der
Datenübertragung in den Drucker.
<br>Das Signal führt H-Pegel, wobei Daten eingelesen werden, wenn
STROBE auf L-Pegel geht. Der Strobe Impuls muss mindestens 0.5 S auf
L-Pegel liegen.
<br>
<br>&nbsp;
<dt><b>Data 0 - Data 7 (D0-D7)</b></dt><dd> Die eigentlichen 8 Datenbits auf 8 getrennten Leitungen.
<br>Das Einlesen der Signale wird nur STROBE syncronisiert.
<br>
<br>&nbsp;
<dt><b>BUSY</b></dt><dd> Signal wird vom Drucker generiert und zeigt dem Computer mit
einem H-Pegel an, daß gerade arbeitet wird; also keine Daten
geschickt werden sollen.
<br>L-Pegel signalisiert Empfangsbereitschaft.
<br>H-Pegel:
<br>- der Drucker verarbeitet Daten
<br>- der Empfangspuffer ist voll
<br>- der Drucker ist Offline
<br>- es ist ein Fehler aufgetreten
<br>
<br>&nbsp;
<dt><b>ACKNOWLEDGE (ACK)</b></dt><dd> Datenanforderungssignal, wird vom Drucker generiert.
<br>Es wird nur gesendet, wenn das BUSY-Signal von H auf L wechselt.
Im Ruhezustand liegt ACK normalerweise auf H.
<br>&nbsp;
<dt><b>PAPER empty (pe)</b></dt><dd> Papierende, kein Papier im Drucker.
<br>Das Signal wechselt von L auf H, sollte kein Papier mehr vorhanden
sein.
<br>
<br>&nbsp;
<dt><b>SELECT (slct)</b></dt><dd> Drucker Online oder Offline. Signalpegel H bei Online, L bei
Offline.
<br>
<br>&nbsp;
<dt><b>AUTO FEED XT (AFXT)</b></dt><dd> Automatischer Zeilenvorschub nach jedem CR). Liegt AFXT auf L
wird ein Zeilenvorschub (LF) angefügt
<br>&nbsp;
<dt><b>Signal-Masse (SG)</b></dt><dd> Masse, GND, logischer Bezugspunkt für alle Leitungen.
<br>
<br>&nbsp;
<dt><b>Gehäuse Masse (FG)</b></dt><dd> Schutzerde, Abschirmung, Leitungsschirm.
<br>
<br>&nbsp;
<dt><b>+5V</b></dt><dd> Positive Versorgungsspannung von 5V, Prüfspannung.
<br>10 bis 50mA! (Keine Verwendung an allen Ataris)
<br>
<br>&nbsp;
<dt><b>RESET / INIT / PRIME</b></dt><dd> Signal wird vom Computer generiert, es löst einen
<a href="0305.htm" target="UDOcon">Hardware</a>-Reset des Druckers aus. Es wechselt zur Initialisierung des
Druckers vom H in den L Pegel. Es kann jederzeit vom Drucker empfangen
werden.
<br>
<br>&nbsp;
<dt><b>ERROR</b></dt><dd> Wird vom Drucker erzeugt und zeigt mit einem L-Pegel an:
<br>- Papierende
<br>- Drucker ist Offline
<br>- Durch eine überlast (z.B. Druckkopf hängt fest)
<br>
<br>&nbsp;
</dl>
<p>
<br>
</p>
<p>Einige Signale werden von den Atari-Computern leider nicht
ausgewertet. Eine dämliche Sparsamkeit bei der
<a href="0305.htm" target="UDOcon">Hardware</a>-Herstellung. Es ist möglich, auch bei Ataris an der
Centronics-Schnittstelle einen Scanner oder auch einen Eprommer zu
betreiben.
<br>
<br>
</p>
<p><b> Pinbelegung des Druckeranschluß </b>
</p>
<p>
<br>
</p>
<div align=center><table border=1 frame=box>
<caption align=bottom>Tabelle 43: Falcon Printer Port</caption>
<tr>
  <td align=left valign=top>F030 Pin</td>
  <td align=left valign=top>Signal</td>
  <td align=left valign=top>F030 Pin</td>
  <td align=left valign=top>Signal</td>
</tr>
<tr>
  <td align=left valign=top></td>
  <td align=left valign=top></td>
  <td align=left valign=top></td>
  <td align=left valign=top></td>
</tr>
<tr>
  <td align=left valign=top>1</td>
  <td align=left valign=top>Strobe</td>
  <td align=left valign=top>8</td>
  <td align=left valign=top>Data 6</td>
</tr>
<tr>
  <td align=left valign=top>2</td>
  <td align=left valign=top>Data 0</td>
  <td align=left valign=top>9</td>
  <td align=left valign=top>Data 7</td>
</tr>
<tr>
  <td align=left valign=top>3</td>
  <td align=left valign=top>Data 1</td>
  <td align=left valign=top>10</td>
  <td align=left valign=top>Acknowledge</td>
</tr>
<tr>
  <td align=left valign=top>4</td>
  <td align=left valign=top>Data 2</td>
  <td align=left valign=top>11</td>
  <td align=left valign=top>Busy</td>
</tr>
<tr>
  <td align=left valign=top>5</td>
  <td align=left valign=top>Data 3</td>
  <td align=left valign=top>12-16</td>
  <td align=left valign=top>n/c</td>
</tr>
<tr>
  <td align=left valign=top>6</td>
  <td align=left valign=top>Data 4</td>
  <td align=left valign=top>17</td>
  <td align=left valign=top>Select</td>
</tr>
<tr>
  <td align=left valign=top>7</td>
  <td align=left valign=top>Data 5</td>
  <td align=left valign=top>18-25</td>
  <td align=left valign=top>GND</td>
</tr>
</table></div>

<p>
<br>
<br>
</p>
<p>Mehr Leitungen werden am Falcon auch nicht benötigt. Die +5V
Leitung vom Drucker -manche besitzen eine solche Leitung- sollte am
Falcon niemals angeschlossen werden, sie könnte hier leicht auf
GND liegen!
<br>
</p>
<p>Selbstredend - sollte sich jemand doch sein Kabel selber
löten wollen: es wird nur abgeschirmte Steuerleitung verwendet!
Der Kabelschirm sollte mit der jeweiligen Gerätemasse verbunden
werden.
<br>
<br>
<br>
</p>
<p><b> Drucker arbeitet nicht </b>
<br>
</p>
<p>Es ist mir bei noch keinem Atari passiert, daß der Soundchip
keine Verbindung zur DB25 Buchse gehabt hätte, dennoch
können Sie die Leiterbahnverbindungen -anhand der Beschreibung
von oben- leicht verfolgen und eventuell mit einem Ohm-Meter
nachprüfen.
</p>
<p>Aller Regel nach aber eine Zeitverschwenung.
<br>
</p>
<p>In vielen Fällen, nachdem Sie auch einen anderen Drucker an
Ihrem Rechner ausprobiert haben, wird es so sein, daß kein
STROBE-Signal mehr vorhanden ist, der Drucker also nicht registrieren
kann, daß ihm eigentlich Daten geschickt werden.
<br>
</p>
<p>Der Rechner kommuniziert mit dem Drucker ausschliesslich über
STROBE, BUSY und AKNOWLEDE. Fehlt nur eines dieser Signale,
schlägt die Verbindung fehl. Der Drucker reagiert nicht oder die
Daten werden einfach in das Nirwana gesendet. Auch ist eher
unwahrscheinlich, daß eine oder mehrere Datenleitungen
beschädigt werden im normalen Druckbetrieb; es sei denn, Sie sind
eine experimentierfreudige Natur und löten oder stecken einfach
alles Erreichbare an die Druckerschnittstelle.
<br>
</p>
<p>Nehmen Sie irgendwelche Messungen an den Steuerleitungen des
Druckerports vor, achten Sie darauf, daß der Drucker nicht
angesteckt ist; er würde alle Anzeigen verfälschen.
<br>
</p>
<p>Entgegen anderweitiger Publikationen besitzt der Falcon sehr wohl
das AKNOWLEDGE-Signal; es erscheint an Pin 10 der Schnittstelle und es
wird definitiv auch benutzt!
<br>
</p>
<p>Der Drucker meldet über die BUSY-Leitung, daß er
beschäftigt ist!
<br>BUSY ist daher ein Eingang für den Rechner. BUSY finden Sie
an Pin 11 der Schnittstellenbuchse und an Pin 25 von U31, das ist der
MFP, MC 68901 wieder. Der MFP stopt über diesen Pin/Interrupt die
Datenausgabe an den Drucker. Prüfen Sie, ob der Drucker nicht
dauerhaft BUSY sendet!!
<br>Im Falcon liegt die BUSY-Leitung über einen 3.3K (R29)
Widerstand auf +5V.
<br>
</p>
<p>ändert sich dieser Widerstand, besteht die Möglichkeit,
daß BUSY nicht mehr erkannt werden kann. BUSY ist LOW-Aktiv!
<br>
</p>
<p>STROBE wird ebenfalls vom Yamaha Soundchip PSG YM 3439 (U17)
erzeugt.
<br>U17 gibt STROBE über Pin 11 aus; Sie finden STROBE an Pin 1
der Schnittstellenbuchse wieder. STROBE ist High aktiv und toggelt im
Gegentakt zu AKNOWLEDGE, wenn Daten an den Drucker gesendet werden.
Ist das nicht der Fall, überprüfen Sie auf alle Fälle
Ihre komplette Druckersoftware und achten Sie darauf, daß z.B.
NVDI korrekt installiert ist. Kommen Sie damit nicht weiter, sehen Sie
kein STROBE-Signal, gibt auch das <a href="030801.htm" target="UDOcon">Testkit</a> keine konkrete Aussage,
wechseln Sie den Soundchip einfach aus. Löten Sie anstelle dessen
einen Sockel mit gedrehten Pins ein, setzen Sie den neuen Chip einfach
in den Sockel. Das spart beim nächsten Mal eine Menge Arbeit.
<br>
</p>
<p>Finden Sie am MFP heraus, ob der Drucker BUSY korrekt sendet.
Ziehen Sie den Drucker danach wieder ab!
<br>Meldet eine Software -nicht- bei einem erneuten Druckversuch das
Fehlen des Druckers, können Sie sich mit dem Gedanken anfreunden,
auch den MFP-Chip auswechseln zu dürfen.
<br>
</p>
<p>ACKNOWLEDE entspringt Pin 26 am MFP, es ist ein Steuersignal, das
eng mit STROBE zusammenarbeitet; sendet der MFP kein AKNOWLEDGE,
arbeitet auch der Drucker nicht. AKNOWLEDGE finden Sie an Pin 10 der
Druckerschnittstelle aussen wieder. AKNOWLEDGE erscheint nur, wenn
STROBE für mindestens 0.5 Sekunden von Low nach High gewechselt
hat!
<br>
</p>
<p>Wird der MFP oder der PSG ungewöhnlich warm, wechseln Sie
diesen Chip einfach gleich aus; spart eine Menge Arbeit. Beide Chips
bekommt man im einschlägigen (Atari) Ersatzteilhandel.
<br>
</p>
<p>Bedenken Sie bitte auch, daß es zumeist einfacher ist,
zuerst den Drucker an einem anderen Computer, oder aber einen anderen
Drucker an Ihrem vermeindlich defekten Computer zu testen. U.U. ist
das wesentlich billiger und geht auch schneller. Ein Defekt am Drucker
kann auch einen Defekt am Computer nachgezogen haben.
<br>
</p>
<p>Testen Sie den vermeidlich defekten Drucker an einem PC.
<br>Aller Regel nach geht dort nichts kaputt.
<br>
</p>
<p>
<br>
<br><b> Lange Leitung.. </b>
<br>
</p>
<p>Als &quot;Druckerkabel&quot; kommen am Falcon Kabel mit einer
maximalen Länge von 5 Metern zur Verwendung. Die besten
Ergebnisse erhält man, wenn man sich mit 1,5-3 Metern langen
Kabeln zufrieden geben kann.
<br>
</p>
<p>Vergessen Sie 10 Meter Kabel! Sie gefährden Ihren Soundchip!!
<br>
</p>
<p>Reicht das nicht, sollten Sie unbedingt einen <a href="100f.htm" target="UDOcon">Druckerbuffer</a>
einsetzen. Sie finden dazu eine sehr einfache Schaltung hier im Archiv
unter Specials. Zwei ICs, ein Steckergehäuse erledigen das ganz
einfach, sofern Sie löten können.
<br>
</p>
<p>
<br>
<br>
</p>



<hr>

</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" class="udocon"></a>
<a href="0c.htm" target="UDOcon"><img src="udo_up.gif" alt="Stecker und Schnittstellen am Falcon F030" class="udocon"></a>
<a href="0c04.htm" target="UDOcon"><img src="udo_lf.gif" alt="interner Expansionsport" class="udocon"></a>
<a href="0c06.htm" target="UDOcon"><img src="udo_rg.gif" alt="LAN-Port" class="udocon"></a>
</td></tr></table>
</body></html>
