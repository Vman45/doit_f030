<!DOCTYPE html>

<html>
<head>
<title>
DOITF030 - Tips u. Tricks zum Atari Falcon F030: Videotextdecoder
</title>
<meta charset="utf-8">


<link rel=home href="index.html" title="Homepage">
<link href="styles/style.css" rel="stylesheet">
</head>
<body>

<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" class="udocon"></a>
<a href="10.htm" target="UDOcon"><img src="udo_up.gif" alt="Diverses rund um den Falcon" class="udocon"></a>
<a href="1002.htm" target="UDOcon"><img src="udo_lf.gif" alt="Taktanzeige" class="udocon"></a>
<a href="1004.htm" target="UDOcon"><img src="udo_rg.gif" alt="DCF77 Decoder" class="udocon"></a>
</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr>
<td valign=top width="8">&nbsp;</td><td valign=top width="100%">
<h1><a name="Videotextdecoder">16.3 Videotextdecoder</a></h1>
<p align=center><img src="image/line.gif" border=0 width="637" height="6"></p><br>
<p><tt> <a href="0302.htm" target="UDOcon">Falcon F030</a> mit Videotextdecoder</tt>
<br>
</p>
<p><img src="image/deutsch.gif" border=0 width="35" height="22"></p><br>
<p>Das c't Magazin stellte in seiner Ausgabe 1-2/91 einen externen
Videotextdecoder vor der bei mir jahrelang am ST gelaufen ist und sich
mit wenig Aufwand auch am <a href="0302.htm" target="UDOcon">Falcon F030</a> zu betreiben lässt. Das
geht hier an der seriellen Modem2 Schnittstelle oder aber bequemer an
einem der Extended-Joystickports. Sicherlich werden viele Leute an
Modem2 eben ein Modem betreiben wollen. Der <a href="0c06.htm" target="UDOcon">LAN-Port</a> scheidet hier aus
da diese Schnittstelle von keinem Treiber der beiden mir bekannten
VT-Programme unterstützt wird.
<br>
</p>
<p>Eine Leerplatine gab es als ebenfalls beim c't-Verlag so das man
sich hier den Nachbau releativ einfach machen konnte. Auch sollte der
Verlag noch in der Lage sein die entsprechenden Artikel aus dem
c't-Magazin vorrätig zu haben. Einen guten Griff tut man halt
wenn man diesen c't Decoder irgendwo günstig gebraucht Auftreiben
kann.
<br>
<br>
</p>
<p>Die Pinbelegung des Decoderanschlußkabels:
</p>
<pre>
Decoder Pin      Falcon ext. Joystickport A oder B
--------------------------------------------------
Decoder GND     ----------------------------- 3
Decoder +5V     ----------------------------- 7
Decoder SDA-OUT ----------------------------- 6
Decoder SCL     ----------------------------- 2
Decoder SDA-IN  ----------------------------- 1
--------------------------------------------------

</pre>
<p>
<br>
</p>
<p>Die Pinbelegung des Decoderanschlußkabels für Mausport:
</p>
<pre>
Decoder Pin               TT/ST/Falcon Mausport
--------------------------------------------------
Decoder GND     ----------------------------- 8
Decoder +5V     ----------------------------- 7
Decoder SDA-OUT ----------------------------- 6
Decoder SCL     ----------------------------- 2
Decoder SDA-IN  ----------------------------- 1
--------------------------------------------------

</pre>
<p>
<br>
</p>
<p>Die Pinbelegung des Decoderanschlußkabels für serial
Port:
</p>
<pre>
Decoder Pin               TT/ST/Falcon serial
--------------------------------------------------
Decoder GND     ----------------------------- 5 +ext. Netzeil
Decoder +5V     -----------------------------   +ext. Netzeil
Decoder SDA-OUT ----------------------------- 2
Decoder SCL     -----------------------------
Decoder SDA-IN  ----------------------------- 3
--------------------------------------------------

</pre>
<p>
<br>
</p>
<p>Verwenden Sie abgeschirmtes Kabel!
<br>
<br>
</p>
<p>Natürlich muß das verwendete Videotextprogramm den
Anschluß am Ext. Joystickport des Falcons unterstützten.
Meines Wissens nach ist das bisher nur bei der Software von Armin
Schneider@FR der Fall. Der Support für dieses Programm wurde
allerdings in diesem Jahr eingestellt da Armin sich anderweitig
betätigt.
<br>
</p>
<p>Diese Software sollte noch in der Maus @FR zu finden sein. Auch
Alexander Heinrich hat für genau diesen Decoder Software parat
die hier aber nur arbeitet wenn der Decoder an der seriellen
Schnittstelle des Falcons auch wirklich angeschlossen ist.
<br>
</p>
<p>Zum Betrieb des Decoders am Falcon wir der MAX232 auf der
Decoderplatine nicht benötigt, man kann diesen Weglassen oder am
besten ausbauen.
<br>Gut wer diesen Chip beim Decoderbau gesockelt hat.
<br>
</p>
<p>Die Leitungen des Ext. Joystickport am Falcon haben TTL-Pegel so
das dieser Chip nicht mehr benötigt wird. Pin 1 des Joystickport
wird als Decoder SDAin verwendet und wird am gleichnamigen Punkt am
Decoder angelötet. SCL wird an Punkt 3 angelötet und
führt somit direkt zu Pin 32 des SAA5246, also dem eigentlichen
Decoderchip. Pin 24 des Decoderchip wird mit Punkt 6 verbunden und
bildet damit SDAout. Selbstredend könnte man noch die +5V aus dem
Falcon entnehmen. Das bereitet bei mir bis heute keinerlei Probleme.
<br>
</p>
<p>Es wird erst zum Problem bei einem Kurzschluß!!
<br>
</p>
<p>Besser ist es schon den VT-Decoder aus einem Steckernetzteil zu
versorgen.
<br>
</p>
<p>Die Leitung zwischen Decoder und Videoquelle ist bei mir 2 Meter
lang, es wird auch mit einer Leitungslänge bis 10 Meter
problemlos laut dem Handbuch einer Decodersoftware laufen.
<br>
</p>
<p>Als Videosignal genügt das Composit Videosignal von einem TV
oder oder einem Videorecorder, man greift das Signal hier einfach an
Pin 20 (Comp.Video) und Pin 19 (GND) in einem Scartstecker ab. Will
man den Videotext von diesem Decoder nicht auf dem laufenden TV
einblenden genügt das als Kabelverbindung zur Videoquelle.
<br>
<br>
<br>
</p>
<p align=center><img src="image/vtdecode.gif" border=0 width="655" height="280"></p><br>
<div align=center><tt> Abbildung 1 - c't Videotextdecoder im offenen
Gehäuse</tt>
</div>
<p>
<br>
<br>
</p>
<p>Hier sieht man den fertig aufgebauten c't-Decoder im eigens von
mir angepasstem Minigehäuse. Die Stromversorgung erfolgt bei mir
aus dem <a href="0f01.htm" target="UDOcon">Netzteil</a> des Falcon direkt über die entsprechenden
DB9-Buchse für den Anschluß an den Rechner, rechts die
DB15-Buchse zum Anschluß an eine Videoquelle zu sehen. Oben
links im auf der Decoderplatine sieht man das der MAX232 bei mir
fehlt. Diesen RS232-Pegelwander benötigt man nur wenn man den
Decoder an einer seriellen Schnittstelle betreiben möchte. Der
Ext. Joystickport am Falcon arbeitet mit normalem TTL-Pegel so
daß man diesen Baustein einsparen kann. Die geänderten
Anschlüsse befinden sich natürlich auf der
Platinenunterseite.
<br>
</p>
<p>Wo heute eigentlich jedes TV-Gerät einen eingbauten Decoder
besitzt ist ein externer VT-Decoder eigentlich ein
überflüssiger Luxus, aber der einzige mir bekannte Weg
Videotext auf dem Computer zu benutzten.
<br>Zumal es hier unter einem Multitasking BS nebenher zu betreiben
ist.
<br>
</p>
<p>
<br><b> Technisches zum Videotextdecoder </b>
<br>
</p>
<p>Von: Uwe Werner
<br>
</p>
<p>Es ist nicht unbedingt sinvoll, SCL in dieser Weise (mit einem
einzigen Schreibzugriff) auf 'Hi' bzw. 'Lo' zu setzen. Das mag zwar in
den allermeisten Fällen funktionieren, aber man sollte jedoch den
Wert der übrigen Bits dieses Registers nicht einfach voraussetzen
und wie in c't angegeben überschreiben. Das kann Probleme mit
softwaremäßigen Monitorumschaltern usw. ergeben.
<br>
</p>
<p>Besser ist es, das Register des Sound-Chips erst zu lesen, nur das
eine Bit zu verändern und dann wieder zurückschreiben. Damit
kein Interrupt dazwischenfunkt, müssen diese gesperrt werden, das
sieht dann so aus:
<br>
</p>
<pre>
  SCH/L:  MOVE    SR,-(SP)        ;Status retten
          ORI     #$0700,SR       ;Interrupts sperren
          MOVE.B  #$0E,SOUNDBASE  ;REG. 14 selektieren
          MOVE.B  SoundBase,D4    ;Register lesen
          ORI.B   #$08,D4         ;IOA3 (RTS) setzen
    bzw.  ANDI.B  #$F7,D4         ;IOA3 (RTS) löschen
          MOVE.B  D4, SoundBase+2 ;Register schreiben
          MOVE.B  (SP)+,SR        ;Status wieder herstellen
          RTS

</pre>
<p>Die für das <a href="030503.htm" target="UDOcon">Timing</a> erforderlichen NOPs können dann
(teilweise) weggelassen werden, da die geäanderten Routinen lahm
genug sein dürften.
<br>
</p>
<p>Auch die c't <a href="0305.htm" target="UDOcon">Hardware</a> ist verbesserungsfähig (siehe
beigelegten <a href="030806.htm" target="UDOcon">Schaltplan</a>):
<br>(Als .IMG gesondert u.a Anfrage erhältlich)
<br>
</p>
<p>Bei meinem Videotext-Adapter wird auch SCL über einen
Transistor vom RTS-Signal der seriellen Schnittstelle bedient und kann
'rückwärts' durch den MAX232 an CTS gelesen werden. Das hat
den Vorteil, daß auch die SCL-Leitung Open-Collector-Charakter
bekommt und weitere Master an den I2C-Bus angeschlossen werden
können. Bei SCL-Bedienung durch den MAX232 dürfte dies zu
Problemen führen, da dieser keine OC-Ausgänge hat sondern
feste Pegel ausgibt.
<br>
</p>
<p>Als Ergänzung zur Schaltung wäre noch zu sagen,
daß ein 1uF-Kondesator vom Schleifer von Tr1 nach Masse nicht
schaden kann und auch die RGB-Puffer aus c't 7/92 der Schaltung nicht
schlecht zu Gesicht stehen. Die Jumper J1 und J2 sind je nach
Höhe und Quelle der Betriebsspannung zu setzen, bzw. wegzulassen.
Pin 10 der Scartbuchse ist i.A. frei und kann im FS-Gerät an
einer geeigneten Spannung angeschlossen werden. J3 ist bei langer
FBAS-Leitung zu setzen, wie in c't beschrieben.
<br>
</p>
<p>
<br>
<br>
</p>



<hr>

</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" class="udocon"></a>
<a href="10.htm" target="UDOcon"><img src="udo_up.gif" alt="Diverses rund um den Falcon" class="udocon"></a>
<a href="1002.htm" target="UDOcon"><img src="udo_lf.gif" alt="Taktanzeige" class="udocon"></a>
<a href="1004.htm" target="UDOcon"><img src="udo_rg.gif" alt="DCF77 Decoder" class="udocon"></a>
</td></tr></table>
</body></html>
