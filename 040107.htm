<!DOCTYPE html>

<html>
<head>
<title>
DOITF030 - Tips u. Tricks zum Atari Falcon F030: 630V1 Keyboardchip
</title>
<meta charset="utf-8">


<link rel=home href="index.html" title="Homepage">
<link href="styles/style.css" rel="stylesheet">
</head>
<body>

<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" class="udocon"></a>
<a href="0401.htm" target="UDOcon"><img src="udo_up.gif" alt="Falcon Custom Chip" class="udocon"></a>
<a href="040106.htm" target="UDOcon"><img src="udo_lf.gif" alt="ACIA Chip" class="udocon"></a>
<a href="040108.htm" target="UDOcon"><img src="udo_rg.gif" alt="68882 FPU" class="udocon"></a>
</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr>
<td valign=top width="8">&nbsp;</td><td valign=top width="100%">
<h1><a name="UDO_630V1_20Keyboardchip">4.1.7 630V1 Keyboardchip</a></h1>
<p align=center><img src="image/line.gif" border=0 width="637" height="6"></p><br>
<p><tt> Der Keyboardprozessor im F030 </tt>
<br>
<br>
</p>
<p><img src="image/deutsch.gif" border=0 width="35" height="22"></p><br>
<p>Der sog. Tastaturprozessor ist bei allen bisher bekannten original
Keyboards für ST/TT/STe und Falcon ein Single-Mikrocomputer des
Typs 6301V1 welcher zur 6800er Familie zählt. Das Gehäuse
ist 40 polig DIL. Der Chip enthält eine 8-Bit CMOS CPU, 124 Byte
RAM, 4K ROM und einen 16-Bit Timer sowie eine serielle Schnittstelle.
Dazu gehören ebenfalls noch vier I/O-Ports mit insgesammt
zusammen 29 Portleitungen.
<br>
</p>
<pre>
Pinbelegung des 6301V1 im <a href="0302.htm" target="UDOcon">Falcon F030</a>:

PIN    FUNKTION   ST/FALCON

1      Vss        GND
2      XTAL       4Mhz max.
3      EXTAL      4Mhz max.
4      NMI        Nicht Maskierbarer Interrupt
5      IRQ        Interrupt Request
6      RES        Reset
7      STBY
8      P20        Port 20
9      P21             21
10     P22             22
11     P23             23
12     P24             24
13     P10        Port 10
14     P11             11
15     P12             12
16     P13             13
17     P14             14
18     P15             15
19     P16             16
20     P17             17
21     Vcc        Versorgungsspannung + 5V
22     P47        Port 47
23     P46             46
24     P45             45
25     P44             44
26     P43             43
27     P42             42
28     P41             41
29     P40             40
30     P37             37
31     P36             36
32     P35             35
33     P34        Port 34
34     P33             33
35     P32             32
36     P31             31
37     P30             30
38     SC2             Chipselekt 2 (nc)
39     SC1             Chipselekt 1 (nc)
40     E                            (nc)


</pre>
<p>Kommen wir nun zu der Funktionsbeschreibung des 630V1-Bausteins:
<br>
</p>
<p>Der 630V1 kennt insgesammt 8 Betriebsarten (0-7). Diese
müssen während dem Reset (PowerOn) eingestellt. Im Atari
läuft der 630V1 immer in Modus 7. Zur Auswahl werden die drei
Leitungen, Leitung 0-2, des Port 2 benutzt. An den Bits 1 und 2
hängen aber auch die Maus-Tasten, daher diese
Umschaltmöglichkeit. Für Atari wird der Betriebsmodus fest
über 3 PullUp-Widerstände eingestellt.
<br>
</p>
<p>Dieser Microcontroller kann auch mit externem Speicher
ausgestattet werden. Dazu werden einige Portleitungen zu
Adressleitungen umfunktioniert. Im Atari gibt es dafür leider
keinen extra Speicher. Daher erfolgt ein Absturz. Der Modus lässt
sich nachträglich nicht mehr ändern.
<br>
</p>
<p>Die Portleitungen P10-P17 sowie P22-P31 bilden die
Multiplex-Matrix die zur mechanischen Anordnung der bekannten
Atari-Tastatur passt. P22-P31 bilden hierbei die vertikalen Leitungen
während P10-P17 die horizontalen Leitungen betreibt.
(Adress-Datenleitungen) An jeweils einem Knotenpunkt befindet sich
eine einzelnen Taste die in Kombination mit anderen Tasten u.U auch
eine Mehrfachfunktion haben kann. P23-P24 wird dazu benutzt um mit der
Keybord-ACIA im Falcon kommunizieren zu können. Alle Daten werden
hierbei seriell mit 7812.5 Bit/Sec übertragen.
<br>
</p>
<p>Bisher sind alle Platinen der Atari-Keyboards völlig
identisch so das jedes <a href="0c02.htm" target="UDOcon">Keyboard</a> mit jedem Atari Computer verwendet
werden kann.
<br>
</p>
<p>Beachten Sie bitte stets die entsprechende Anschlußfolge!
<br>
</p>
<p>
<br>
<br>
</p>



<hr>

</td></tr></table>
<table border=0 cellpadding=0 cellspacing=0 width="100%"><tr><td valign=top>
<a href="00con.htm" target="UDOcon"><img src="udo_hm.gif" alt="Home" class="udocon"></a>
<a href="0401.htm" target="UDOcon"><img src="udo_up.gif" alt="Falcon Custom Chip" class="udocon"></a>
<a href="040106.htm" target="UDOcon"><img src="udo_lf.gif" alt="ACIA Chip" class="udocon"></a>
<a href="040108.htm" target="UDOcon"><img src="udo_rg.gif" alt="68882 FPU" class="udocon"></a>
</td></tr></table>
</body></html>
